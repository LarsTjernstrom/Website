<dom-module id="website-section">
    <style></style>
    <template>
        <template is="dom-repeat" items="{{applications}}">
            <template is="imported-template" content$="{{item.content}}" model="{{item.value}}"></template>
        </template>
    </template>
    <script>
        Polymer({
            is: "website-section",
            properties: {
                applications: {
                    type: Array,
                    value: [],
                    notify: true
                },
                model: {
                    type: Object,
                    value: null,
                    observer: "modelChanged"
                }
            },
            ready: function () {
            },
            getHtml: function (name) {
                return this.model[name].Html;
            },
            getValue: function (name) {
                return this.model[name].Value || this.model[name];
            },
            modelChanged: function (newValue, oldValue) {
                var apps = [];

                for (var i in newValue) {
                    if (!newValue.hasOwnProperty(i) || !newValue[i] || typeof(newValue[i]) == "string") {
                        continue;
                    }

                    apps.push({
                        name: i,
                        content: newValue[i].Html,
                        value: newValue[i].Value || newValue[i]
                    });
                }

                this.set("applications", []);

                setTimeout(function () {
                    this.set("applications", apps);
                }.bind(this));
            }
        });
    </script>
</dom-module>